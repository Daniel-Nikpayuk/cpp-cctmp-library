/************************************************************************************************************************
**
** Copyright 2022-2023 Daniel Nikpayuk, Inuit Nunangat, The Inuit Nation
**
** This file is part of cpp_cctmp_library.
**
** cpp_cctmp_library is free software: you can redistribute it and/or modify it under the terms
** of the GNU General Public License as published by the Free Software Foundation, either version 3
** of the License, or (at your option) any later version.
**
** cpp_cctmp_library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
** without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
** See the GNU General Public License for more details.
**
** You should have received a copy of the GNU General Public License along with cpp_cctmp_library.
** If not, see <http://www.gnu.org/licenses/>.
**
************************************************************************************************************************/

// context free grammars:

/***********************************************************************************************************************/
/***********************************************************************************************************************/
/***********************************************************************************************************************/

// generic assembly grammar:

/***********************************************************************************************************************/

  /*---------------------------------*/
  /* generic assembly paradigm:      */
  /*                                 */
  /* function-name args...         ; */
  /*                                 */
  /* label:                        ; */
  /* var # var                     ; */
  /* test operation vars...        ; */
  /* branch label                  ; */
  /* var = operation vars...       ; */  /*---------------------------------*/
  /* ...                           ; */  /* context-free grammar (CFG):     */
  /* goto label                    ; */  /*                                 */
  /*                                 */  /* S -> D;R                        */
  /* label:                        ; */  /* D -> iN                         */
  /* test operation vars...        ; */  /* N -> iN      | e                */
  /* branch label                  ; */  /* R -> BC                         */
  /* var = operation vars...       ; */  /* C -> BC      | e                */
  /* ...                           ; */  /* B -> l;LgO;  | l;rM;            */
  /*                                 */  /* L -> IJ                         */
  /* label:                        ; */  /* J -> IJ      | e                */
  /* var # var                     ; */  /* I -> P#M;    | P=MV;            */
  /* ...                           ; */  /*   -> !T=F;   | tF;bO;  | vF;    */
  /* return var                    ; */  /* F -> MV                         */
  /*---------------------------------*/  /* V -> MV      | !TV     | e      */
  /* nonterminals:                   */  /* T -> i                          */
  /*                                 */  /* O -> i                          */
  /* S - start                       */  /* P -> i       | .                */
  /* D - definition (signature)      */  /* M -> i       | _       | q      */
  /* N - name (denies anonymity)     */  /*---------------------------------*/
  /* R - block (at least one)        */  /* minimized CFG:                  */
  /* C - block (recursive)           */  /*                                 */
  /* B - block                       */  /* S -> iN;BC                      */
  /* L - instruction (at least one)  */  /* N -> iN      | e                */
  /* J - instruction (recursive)     */  /* C -> BC      | e                */
  /* I - instruction                 */  /* B -> l;IJgO; | l;rM;            */
  /* F - identifier (at least one)   */  /* J -> IJ      | e                */
  /* V - variable (allows anonymity) */  /* I -> P#M;    | P=MV;            */
  /* P - pick (lvalue variable)      */  /*   -> !T=MV;  | tMV;bO; | vMV;   */
  /* M - mark (rvalue variable)      */  /* V -> MV      | !TV     | e      */
  /* T - tag (mvalue variable)       */  /* T -> i                          */
  /* O - option (jvalue variable)    */  /* O -> i                          */
  /*---------------------------------*/  /* P -> i       | .                */
  /* terminals (tokens):             */  /* M -> i       | _       | q      */
  /*                                 */  /*---------------------------------*/
  /* l - label                       */  /* left factored CFG:              */
  /* t - test                        */  /*                                 */
  /* b - branch                      */  /* S -> iN;BC                      */
  /* g - goto                        */  /* N -> iN      | e                */
  /* r - return                      */  /* C -> BC      | e                */
  /* i - identifier                  */  /* B -> l;E                        */
  /* ! - punctuation                 */  /* E -> IJgO;   | rM;              */
  /* v - void                        */  /* J -> IJ      | e                */
  /* q - quote                       */  /* I -> P#M;    | P=MV;            */
  /* . - anonymous *lvalue*          */  /*   -> !T=MV;  | tMV;bO; | vMV;   */
  /* _ - anonymous *rvalue*          */  /* V -> MV      | !TV     | e      */
  /* # - assignment                  */  /* T -> i                          */
  /* = - application                 */  /* O -> i                          */
  /* ; - statement (end)             */  /* P -> i       | .                */
  /* e - empty                       */  /* M -> i       | _       | q      */
  /*---------------------------------*/  /*---------------------------------*/

  /*-------------------------------------------------------------------------------------------------*/
  /* parse table:                                                                                    */
  /*                                                                                                 */
  /* n\t | i                 | .                 | !           | t            | v          | q       */
  /*-------------------------------------------------------------------------------------------------*/
  /*   S | S -> iN;BC        |                   |             |              |            |         */
  /*   N | N -> iN           |                   |             |              |            |         */
  /*   C |                   |                   |             |              |            |         */
  /*   B |                   |                   |             |              |            |         */
  /*   E | E -> IJgO;        | E -> IJgO;        | E -> IJgO;  | E -> IJgO;   | E -> IJgO; |         */
  /*   J | J -> IJ           | J -> IJ           | J -> IJ     | J -> IJ      | J -> IJ    |         */
  /*   I | I -> P#M; | P=MV; | I -> P#M; | P=MV; | I -> !T=MV; | I -> tMV;bO; | I -> vMV;  |         */
  /*   V | V -> MV           |                   | V -> !TV    |              |            | V -> MV */
  /*   T | T -> i            |                   |             |              |            |         */
  /*   O | O -> i            |                   |             |              |            |         */
  /*   P | P -> i            | P -> .            |             |              |            |         */
  /*   M | M -> i            |                   |             |              |            | M -> q  */
  /*-------------------------------------------------------------------------------------------------*/
  /* n\t | _                 | l                 | ;           | r            | g          | $       */
  /*-------------------------------------------------------------------------------------------------*/
  /*   S |                   |                   |             |              |            |         */
  /*   N |                   |                   | N -> e      |              |            |         */
  /*   C |                   | C -> BC           |             |              |            | C -> e  */
  /*   B |                   | B -> l;E          |             |              |            |         */
  /*   E |                   |                   |             | E -> rM;     |            |         */
  /*   J |                   |                   |             |              | J -> e     |         */
  /*   I |                   |                   |             |              |            |         */
  /*   V | V -> MV           |                   | V -> e      |              |            |         */
  /*   T |                   |                   |             |              |            |         */
  /*   O |                   |                   |             |              |            |         */
  /*   P |                   |                   |             |              |            |         */
  /*   M | M -> _            |                   |             |              |            |         */
  /*-------------------------------------------------------------------------------------------------*/

/***********************************************************************************************************************/
/***********************************************************************************************************************/

// chord assembly grammars:

/***********************************************************************************************************************/

  /* 0 - repeat                      */
  /* 1 - map                         */
  /* 2 - fold                        */
  /* 3 - find first                  */
  /* 4 - find all                    */
  /* 5 - zip (bimap)                 */
  /* 6 - fasten (zip with a carry)   */
  /* 7 - glide (bifold)              */

  /*---------------------------------*/  /*---------------------------------*/  /*---------------------------------*/
  /* nonterminals:                   */  /* repeat (D chord):               */  /* map (P chord):                  */
  /*                                 */  /*                                 */  /*                                 */
  /* S - start                       */  /* S -> <U\|B\|B>LD,R{}            */  /* S -> <U\|B\|B>LPRLP,PR          */
  /* B - binary (at most one)        */  /*---------------------------------*/  /*---------------------------------*/
  /* U - unary (at most one)         */  /* fold (D chord):                 */  /* zip (P chord):                  */
  /* P - pair (at most one)          */  /*                                 */  /*                                 */
  /* D - direction                   */  /* S -> <B\|B\|B>{}LD,R            */  /* S -> <B\|B\|B>LPRLPRLP,PR       */
  /* L - left interval               */  /*---------------------------------*/  /*---------------------------------*/
  /* R - right interval              */  /* find first (D chord):           */  /* fasten (P chord):               */
  /*---------------------------------*/  /*                                 */  /*                                 */
  /* terminals (tokens):             */  /* S -> <U\|B>LD,R                 */  /* S -> <B\|B\|B\|B>LPR{}LPRLP,PR  */
  /*                                 */  /*---------------------------------*/  /*---------------------------------*/
  /*  < - left angle                 */  /* find all (D chord):             */  /* glide (P chord):                */
  /*  > - right angle                */  /*                                 */  /*                                 */
  /* \| - bar                        */  /* S -> <U\|B\|B>LDRLD,R           */  /* S -> <B\|B\|B\|B>{}LPRLP,PR     */
  /*  @ - identity                   */  /*---------------------------------*/  /*---------------------------------*/
  /*  * - dereference                */  /* D chord (CFG):                  */  /* P chord (CFG):                  */
  /*  i - identifier                 */  /*                                 */  /*                                 */
  /*  + - increment                  */  /* B -> iUU  | e                   */  /* B -> iUU  | e                   */
  /*  - - decrement                  */  /* U -> @    | * | i | e           */  /* U -> @    | *    | i    | e     */
  /*  [ - left closed                */  /* D -> +    | - | i | e           */  /* P -> +\|- | -\|+ | i\|i | e     */
  /*  ( - left open                  */  /* L -> [    | (                   */  /* L -> [    | (                   */
  /*  ] - right closed               */  /* R -> ]    | )                   */  /* R -> ]    | )                   */
  /*  ) - right open                 */  /*---------------------------------*/  /*---------------------------------*/
  /*  { - left fixed                 */
  /*  } - right fixed                */
  /*  , - comma                      */
  /*  e - empty                      */
  /*---------------------------------*/

// D chord:

  /*-------------------------------------------------------------------------------------------------------*/
  /* repeat parse table                                                                                    */
  /*                                                                                                       */
  /* n\t | <                    | i          | \|     | >      | @          | *          | +      | -      */
  /*-------------------------------------------------------------------------------------------------------*/
  /*   S | S -> <U\|B\|B>LD,R{} |            |        |        |            |            |        |        */
  /*   B |                      | B -> iUU   | B -> e | B -> e |            |            |        |        */
  /*   U |                      | U -> i | e | U -> e | U -> e | U -> @ | e | U -> * | e |        |        */
  /*   D |                      | D -> i     |        |        |            |            | D -> + | D -> - */
  /*   L |                      |            |        |        |            |            |        |        */
  /*   R |                      |            |        |        |            |            |        |        */
  /*-------------------------------------------------------------------------------------------------------*/
  /* n\t | ,                    | [          | (      | ]      | )          | {          | }      | $      */
  /*-------------------------------------------------------------------------------------------------------*/
  /*   S |                      |            |        |        |            |            |        |        */
  /*   B |                      |            |        |        |            |            |        |        */
  /*   U |                      |            |        |        |            |            |        |        */
  /*   D | D -> e               |            |        |        |            |            |        |        */
  /*   L |                      | L -> [     | L -> ( |        |            |            |        |        */
  /*   R |                      |            |        | R -> ] | R -> )     |            |        |        */
  /*-------------------------------------------------------------------------------------------------------*/

  /*-------------------------------------------------------------------------------------------------------*/
  /* fold parse table                                                                                      */
  /*                                                                                                       */
  /* n\t | <                    | i          | \|     | >      | @          | *          | +      | -      */
  /*-------------------------------------------------------------------------------------------------------*/
  /*   S | S -> <B\|B\|B>{}LD,R |            |        |        |            |            |        |        */
  /*   B |                      | B -> iUU   | B -> e | B -> e |            |            |        |        */
  /*   U |                      | U -> i | e | U -> e | U -> e | U -> @ | e | U -> * | e |        |        */
  /*   D |                      | D -> i     |        |        |            |            | D -> + | D -> - */
  /*   L |                      |            |        |        |            |            |        |        */
  /*   R |                      |            |        |        |            |            |        |        */
  /*-------------------------------------------------------------------------------------------------------*/
  /* n\t | ,                    | [          | (      | ]      | )          | {          | }      | $      */
  /*-------------------------------------------------------------------------------------------------------*/
  /*   S |                      |            |        |        |            |            |        |        */
  /*   B |                      |            |        |        |            |            |        |        */
  /*   U |                      |            |        |        |            |            |        |        */
  /*   D | D -> e               |            |        |        |            |            |        |        */
  /*   L |                      | L -> [     | L -> ( |        |            |            |        |        */
  /*   R |                      |            |        | R -> ] | R -> )     |            |        |        */
  /*-------------------------------------------------------------------------------------------------------*/

  /*--------------------------------------------------------------------------------------------------*/
  /* find first parse table                                                                           */
  /*                                                                                                  */
  /* n\t | <               | i          | \|     | >      | @          | *          | +      | -      */
  /*--------------------------------------------------------------------------------------------------*/
  /*   S | S -> <U\|B>LD,R |            |        |        |            |            |        |        */
  /*   B |                 | B -> iUU   |        | B -> e |            |            |        |        */
  /*   U |                 | U -> i | e | U -> e | U -> e | U -> @ | e | U -> * | e |        |        */
  /*   D |                 | D -> i     |        |        |            |            | D -> + | D -> - */
  /*   L |                 |            |        |        |            |            |        |        */
  /*   R |                 |            |        |        |            |            |        |        */
  /*--------------------------------------------------------------------------------------------------*/
  /* n\t | ,               | [          | (      | ]      | )          | {          | }      | $      */
  /*--------------------------------------------------------------------------------------------------*/
  /*   S |                 |            |        |        |            |            |        |        */
  /*   B |                 |            |        |        |            |            |        |        */
  /*   U |                 |            |        |        |            |            |        |        */
  /*   D | D -> e          |            |        |        |            |            |        |        */
  /*   L |                 | L -> [     | L -> ( |        |            |            |        |        */
  /*   R |                 |            |        | R -> ] | R -> )     |            |        |        */
  /*--------------------------------------------------------------------------------------------------*/

  /*--------------------------------------------------------------------------------------------------------*/
  /* find all parse table                                                                                   */
  /*                                                                                                        */
  /* n\t | <                     | i          | \|     | >      | @          | *          | +      | -      */
  /*--------------------------------------------------------------------------------------------------------*/
  /*   S | S -> <U\|B\|B>LDRLD,R |            |        |        |            |            |        |        */
  /*   B |                       | B -> iUU   | B -> e | B -> e |            |            |        |        */
  /*   U |                       | U -> i | e | U -> e | U -> e | U -> @ | e | U -> * | e |        |        */
  /*   D |                       | D -> i     |        |        |            |            | D -> + | D -> - */
  /*   L |                       |            |        |        |            |            |        |        */
  /*   R |                       |            |        |        |            |            |        |        */
  /*--------------------------------------------------------------------------------------------------------*/
  /* n\t | ,                     | [          | (      | ]      | )          | {          | }      | $      */
  /*--------------------------------------------------------------------------------------------------------*/
  /*   S |                       |            |        |        |            |            |        |        */
  /*   B |                       |            |        |        |            |            |        |        */
  /*   U |                       |            |        |        |            |            |        |        */
  /*   D | D -> e                |            |        | D -> e | D -> e     |            |        |        */
  /*   L |                       | L -> [     | L -> ( |        |            |            |        |        */
  /*   R |                       |            |        | R -> ] | R -> )     |            |        |        */
  /*--------------------------------------------------------------------------------------------------------*/

// P chord:

  /*---------------------------------------------------------------------------------------------------------------*/
  /* map parse table                                                                                               */
  /*                                                                                                               */
  /* n\t | <                      | i          | \|     | >      | @          | *          | +         | -         */
  /*---------------------------------------------------------------------------------------------------------------*/
  /*   S | S -> <U\|B\|B>LPRLP,PR |            |        |        |            |            |           |           */
  /*   B |                        | B -> iUU   | B -> e | B -> e |            |            |           |           */
  /*   U |                        | U -> i | e | U -> e | U -> e | U -> @ | e | U -> * | e |           |           */
  /*   P |                        | P -> i\|i  |        |        |            |            | P -> +\|- | D -> -\|+ */
  /*   L |                        |            |        |        |            |            |           |           */
  /*   R |                        |            |        |        |            |            |           |           */
  /*---------------------------------------------------------------------------------------------------------------*/
  /* n\t | ,                      | [          | (      | ]      | )          | {          | }         | $         */
  /*---------------------------------------------------------------------------------------------------------------*/
  /*   S |                        |            |        |        |            |            |           |           */
  /*   B |                        |            |        |        |            |            |           |           */
  /*   U |                        |            |        |        |            |            |           |           */
  /*   P | P -> e                 |            |        | P -> e | P -> e     |            |           |           */
  /*   L |                        | L -> [     | L -> ( |        |            |            |           |           */
  /*   R |                        |            |        | R -> ] | R -> )     |            |           |           */
  /*---------------------------------------------------------------------------------------------------------------*/

  /*------------------------------------------------------------------------------------------------------------------*/
  /* zip parse table                                                                                                  */
  /*                                                                                                                  */
  /* n\t | <                         | i          | \|     | >      | @          | *          | +         | -         */
  /*------------------------------------------------------------------------------------------------------------------*/
  /*   S | S -> <B\|B\|B>LPRLPRLP,PR |            |        |        |            |            |           |           */
  /*   B |                           | B -> iUU   | B -> e | B -> e |            |            |           |           */
  /*   U |                           | U -> i | e | U -> e | U -> e | U -> @ | e | U -> * | e |           |           */
  /*   P |                           | P -> i\|i  |        |        |            |            | P -> +\|- | D -> -\|+ */
  /*   L |                           |            |        |        |            |            |           |           */
  /*   R |                           |            |        |        |            |            |           |           */
  /*------------------------------------------------------------------------------------------------------------------*/
  /* n\t | ,                         | [          | (      | ]      | )          | {          | }         | $         */
  /*------------------------------------------------------------------------------------------------------------------*/
  /*   S |                           |            |        |        |            |            |           |           */
  /*   B |                           |            |        |        |            |            |           |           */
  /*   U |                           |            |        |        |            |            |           |           */
  /*   P | P -> e                    |            |        | P -> e | P -> e     |            |           |           */
  /*   L |                           | L -> [     | L -> ( |        |            |            |           |           */
  /*   R |                           |            |        | R -> ] | R -> )     |            |           |           */
  /*------------------------------------------------------------------------------------------------------------------*/

  /*-----------------------------------------------------------------------------------------------------------------------*/
  /* fasten parse table                                                                                                    */
  /*                                                                                                                       */
  /* n\t | <                              | i          | \|     | >      | @          | *          | +         | -         */
  /*-----------------------------------------------------------------------------------------------------------------------*/
  /*   S | S -> <B\|B\|B\|B>LPR{}LPRLP,PR |            |        |        |            |            |           |           */
  /*   B |                                | B -> iUU   | B -> e | B -> e |            |            |           |           */
  /*   U |                                | U -> i | e | U -> e | U -> e | U -> @ | e | U -> * | e |           |           */
  /*   P |                                | P -> i\|i  |        |        |            |            | P -> +\|- | D -> -\|+ */
  /*   L |                                |            |        |        |            |            |           |           */
  /*   R |                                |            |        |        |            |            |           |           */
  /*-----------------------------------------------------------------------------------------------------------------------*/
  /* n\t | ,                              | [          | (      | ]      | )          | {          | }         | $         */
  /*-----------------------------------------------------------------------------------------------------------------------*/
  /*   S |                                |            |        |        |            |            |           |           */
  /*   B |                                |            |        |        |            |            |           |           */
  /*   U |                                |            |        |        |            |            |           |           */
  /*   P | P -> e                         |            |        | P -> e | P -> e     |            |           |           */
  /*   L |                                | L -> [     | L -> ( |        |            |            |           |           */
  /*   R |                                |            |        | R -> ] | R -> )     |            |           |           */
  /*-----------------------------------------------------------------------------------------------------------------------*/

  /*--------------------------------------------------------------------------------------------------------------------*/
  /* glide parse table                                                                                                  */
  /*                                                                                                                    */
  /* n\t | <                           | i          | \|     | >      | @          | *          | +         | -         */
  /*--------------------------------------------------------------------------------------------------------------------*/
  /*   S | S -> <B\|B\|B\|B>{}LPRLP,PR |            |        |        |            |            |           |           */
  /*   B |                             | B -> iUU   | B -> e | B -> e |            |            |           |           */
  /*   U |                             | U -> i | e | U -> e | U -> e | U -> @ | e | U -> * | e |           |           */
  /*   P |                             | P -> i\|i  |        |        |            |            | P -> +\|- | D -> -\|+ */
  /*   L |                             |            |        |        |            |            |           |           */
  /*   R |                             |            |        |        |            |            |           |           */
  /*--------------------------------------------------------------------------------------------------------------------*/
  /* n\t | ,                           | [          | (      | ]      | )          | {          | }         | $         */
  /*--------------------------------------------------------------------------------------------------------------------*/
  /*   S |                             |            |        |        |            |            |           |           */
  /*   B |                             |            |        |        |            |            |           |           */
  /*   U |                             |            |        |        |            |            |           |           */
  /*   P | P -> e                      |            |        | P -> e | P -> e     |            |           |           */
  /*   L |                             | L -> [     | L -> ( |        |            |            |           |           */
  /*   R |                             |            |        | R -> ] | R -> )     |            |           |           */
  /*--------------------------------------------------------------------------------------------------------------------*/

/***********************************************************************************************************************/
/***********************************************************************************************************************/
/***********************************************************************************************************************/

